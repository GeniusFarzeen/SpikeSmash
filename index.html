<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spike Smash</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: #050015;
        font-family: 'Segoe UI', sans-serif;
    }
    #gameCanvas {
        display: block;
        margin: auto;
        background: radial-gradient(circle, #0a0026, #000);
        border: 3px solid #8215ff;
        box-shadow: 0 0 20px #8215ff;
        border-radius: 10px;
    }
    #ui {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        color: cyan;
        font-size: 24px;
        font-weight: bold;
        text-shadow: 0 0 10px cyan;
    }
</style>
</head>
<body>

<div id="ui">Score: 0 | Spikes: 0</div>
<canvas id="gameCanvas" width="400" height="600"></canvas>
<audio id="bgMusic" src="Spike Smash Anthem.mp3" loop autoplay></audio>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// Ball
let ball = {
    x: canvas.width / 2,
    y: canvas.height - 120,
    r: 45,
    neonPulse: 0
};

// Spikes
let spikes = [];
let maxSpikes = 6;

// Score
let score = 0;
const ui = document.getElementById("ui");
function updateUI() {
    ui.textContent = `Score: ${score} | Spikes: ${spikes.length}`;
}

// Spawn spikes randomly from top
function spawnSpike() {
    if (spikes.length < maxSpikes) {
        spikes.push({
            x: Math.random() * (canvas.width - 30),
            y: -40,
            size: 30,
            speed: 3 + Math.random()*2
        });
    }
}

// Draw neon ball
function drawBall() {
    ball.neonPulse += 0.15;
    let glow = Math.sin(ball.neonPulse) * 10 + 25;
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2);
    ctx.fillStyle = "#00f2ff";
    ctx.shadowColor = "#9b2bff";
    ctx.shadowBlur = glow;
    ctx.fill();
    ctx.shadowBlur = 0;
}

// Draw spikes
function drawSpikes() {
    ctx.fillStyle = "#ff005d";
    spikes.forEach(s => {
        s.y += s.speed;
        if (s.y > canvas.height) s.y = -40; // loop back
        ctx.beginPath();
        ctx.moveTo(s.x, s.y);
        ctx.lineTo(s.x + s.size, s.y);
        ctx.lineTo(s.x + s.size / 2, s.y + s.size);
        ctx.closePath();
        ctx.fill();

        // Check collision with ball
        const dx = ball.x - (s.x + s.size/2);
        const dy = ball.y - (s.y + s.size/2);
        const dist = Math.sqrt(dx*dx + dy*dy);
        if (dist < ball.r + s.size/2) {
            // spike hits ball â€” increment score
            score += 1;
            s.y = -40; // reset spike
            updateUI();
        }
    });
}

// Click/tap spawns more spikes
canvas.addEventListener("click", () => {
    for(let i=0;i<2;i++) spawnSpike();
});
canvas.addEventListener("touchstart", () => {
    for(let i=0;i<2;i++) spawnSpike();
});

// Ball movement controlled by mouse/touch
canvas.addEventListener("mousemove", e => {
    let r = canvas.getBoundingClientRect();
    ball.x = Math.max(ball.r, Math.min(canvas.width - ball.r, e.clientX - r.left));
});
canvas.addEventListener("touchmove", e => {
    let r = canvas.getBoundingClientRect();
    ball.x = Math.max(ball.r, Math.min(canvas.width - ball.r, e.touches[0].clientX - r.left));
});

// Game loop
function loop() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawBall();
    drawSpikes();

    if (Math.random() < 0.05) spawnSpike();
    requestAnimationFrame(loop);
}

// Start
updateUI();
loop();
</script>

</body>
</html>
