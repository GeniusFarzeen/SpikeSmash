<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spike Smash</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        background: #050015;
        color: #fff;
        text-align: center;
        font-family: 'Segoe UI', sans-serif;
        margin: 0;
        overflow: hidden;
    }
    #gameCanvas {
        display: none;
        background: radial-gradient(circle, #0a0026, #000);
        margin: auto;
        border: 3px solid #8215ff;
        box-shadow: 0 0 20px #8215ff;
    }
    .logo {
        font-size: 48px;
        margin-top: 60px;
        font-weight: 900;
        text-shadow: 0px 0px 25px #9b2bff;
    }
    .btn {
        font-size: 22px;
        padding: 14px 34px;
        background: linear-gradient(45deg, #8215ff, #2bdcff);
        border: none;
        border-radius: 15px;
        cursor: pointer;
        margin-top: 25px;
        font-weight: bold;
        box-shadow: 0 0 10px #2bdcff;
        transition: 0.2s;
    }
    .btn:hover {
        box-shadow: 0 0 30px #2bdcff;
    }
</style>
</head>
<body>

<h1 class="logo">SPIKE SMASH</h1>
<button id="playButton" class="btn">PLAY</button>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = 400;
canvas.height = 600;

let spikes = [];
let score = 0;
let gameRunning = false;
let clickBoost = 0;
let playerSize = 45;
let playerX = canvas.width / 2;
let playerY = canvas.height - 120;
let neonPulse = 0;

// Start Game
document.getElementById("playButton").addEventListener("click", () => {
    document.getElementById("playButton").style.display = "none";
    canvas.style.display = "block";
    gameRunning = true;
    score = 0;
    spikes = [];
    loop();
});

// Spawn Spikes
function spawnSpike(rate = 1) {
    for (let i = 0; i < rate; i++) {
        spikes.push({
            x: Math.random() * (canvas.width - 30),
            y: -40,
            size: 30
        });
    }
}

// Draw Player (Sci-Fi Glow Ball)
function drawPlayer() {
    neonPulse += 0.15;
    let glow = Math.sin(neonPulse) * 10 + 25;

    ctx.beginPath();
    ctx.arc(playerX, playerY, playerSize, 0, Math.PI * 2);
    ctx.fillStyle = "#00f2ff";
    ctx.shadowColor = "#9b2bff";
    ctx.shadowBlur = glow;
    ctx.fill();
    ctx.shadowBlur = 0;
}

// Draw Spikes
function drawSpikes() {
    ctx.fillStyle = "#ff005d";
    spikes.forEach(s => {
        ctx.beginPath();
        ctx.moveTo(s.x, s.y);
        ctx.lineTo(s.x + s.size, s.y);
        ctx.lineTo(s.x + s.size/2, s.y + s.size);
        ctx.fill();
        s.y += 6 + clickBoost;
    });
}

// Collision Check
function checkCollision() {
    spikes.forEach(s => {
        const dist = Math.hypot(playerX - (s.x + s.size/2), playerY - (s.y + s.size/2));
        if (dist < playerSize) endGame();
    });
}

// End Game
function endGame() {
    alert("ðŸ’€ GAME OVER!\nScore: " + score);
    location.reload();
}

// Game Loop
function loop() {
    if (!gameRunning) return;
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawPlayer();
    drawSpikes();
    checkCollision();
    
    // Spawn logic
    if (Math.random() < 0.06 + clickBoost * 0.02) spawnSpike();

    score++;
    clickBoost *= 0.95;
    
    requestAnimationFrame(loop);
}

// Mouse + Touch movement
window.addEventListener("mousemove", e => {
    let r = canvas.getBoundingClientRect();
    playerX = e.clientX - r.left;
});
window.addEventListener("touchmove", e => {
    let r = canvas.getBoundingClientRect();
    playerX = e.touches[0].clientX - r.left;
});

// Click = More Spikes
window.addEventListener("click", () => {
    clickBoost += 0.8;
    spawnSpike(3);
});
</script>

</body>
</html>
