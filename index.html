<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spike Smash</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body {
        background: #050015;
        color: #fff;
        text-align: center;
        font-family: 'Segoe UI', sans-serif;
        margin: 0;
        overflow: hidden;
    }
    #gameCanvas {
        display: block;
        background: radial-gradient(circle, #0a0026, #000);
        margin: auto;
        border: 3px solid #8215ff;
        box-shadow: 0 0 20px #8215ff;
        border-radius: 10px;
    }
    #ui {
        position: absolute;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        color: cyan;
        font-size: 24px;
        font-weight: bold;
        text-shadow: 0 0 10px cyan;
    }
</style>
</head>
<body>

<div id="ui">Score: 0 | Spikes: 0</div>
<canvas id="gameCanvas" width="400" height="600"></canvas>
<audio id="clickSound" src="Spike Smash Anthem.mp3"></audio>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let score = 0;
let spikes = [];
let maxSpikes = 6;
let clickBoost = 0;

// Player ball
let ball = {
    x: canvas.width / 2,
    y: canvas.height - 120,
    r: 45,
    neonPulse: 0
};

// UI
const ui = document.getElementById("ui");
function updateUI(){
    ui.textContent = `Score: ${score} | Spikes: ${spikes.length}`;
}

// Spike spawn sound
const clickSound = document.getElementById("clickSound");

// Spawn spike toward player (click effect)
function spawnSpike(rate=1){
    for(let i=0;i<rate;i++){
        if(spikes.length < maxSpikes){
            spikes.push({
                x: Math.random() * (canvas.width - 30),
                y: -40,
                size: 30,
                speed: 4 + clickBoost
            });
        }
    }
    clickSound.currentTime = 0;
    clickSound.play();
}

// Draw glowing ball
function drawBall(){
    ball.neonPulse += 0.15;
    let glow = Math.sin(ball.neonPulse)*10 + 25;
    ctx.beginPath();
    ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2);
    ctx.fillStyle = "#00f2ff";
    ctx.shadowColor = "#9b2bff";
    ctx.shadowBlur = glow;
    ctx.fill();
    ctx.shadowBlur = 0;
}

// Draw spikes
function drawSpikes(){
    ctx.fillStyle = "#ff005d";
    spikes.forEach(s => {
        s.y += s.speed;
        if(s.y > canvas.height) s.y = -40; // loop back
        ctx.beginPath();
        ctx.moveTo(s.x, s.y);
        ctx.lineTo(s.x+s.size, s.y);
        ctx.lineTo(s.x+s.size/2, s.y+s.size);
        ctx.closePath();
        ctx.fill();
    });
}

// Click = spawn spikes + boost
canvas.addEventListener("click", (e)=>{
    clickBoost += 0.8;
    spawnSpike(3);
    score++;
    updateUI();
});

// Mouse / touch move ball
canvas.addEventListener("mousemove", (e)=>{
    let r = canvas.getBoundingClientRect();
    ball.x = Math.max(ball.r, Math.min(canvas.width-ball.r, e.clientX - r.left));
});
canvas.addEventListener("touchmove", (e)=>{
    let r = canvas.getBoundingClientRect();
    ball.x = Math.max(ball.r, Math.min(canvas.width-ball.r, e.touches[0].clientX - r.left));
});

// Game loop
function loop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    drawBall();
    drawSpikes();
    
    // spawn spikes randomly
    if(Math.random() < 0.06 + clickBoost*0.02) spawnSpike();
    clickBoost *= 0.95; // decay boost

    requestAnimationFrame(loop);
}

// Start game instantly
updateUI();
loop();
</script>

</body>
</html>
